<!-- mini_fb/templates/mini_fb/show_profile.html -->

{% extends 'mini_fb/base.html' %}

{% block content %}
    <a href="{% url 'show_all_profiles' %}" class="back-button">‚Üê Back to All Profiles</a>

    <div class="profile-detail">
        <div class="profile-image">
            {% if profile.profile_image %}
                <img src="{{ profile.profile_image }}" alt="{{ profile.first_name }}'s profile image">
            {% else %}
                <p>No image available</p>
            {% endif %}
        </div>
        <div class="profile-info">
            <h2>{{ profile.first_name }} {{ profile.last_name }}</h2>
            <table>
                <tr>
                    <td><strong>City:</strong></td>
                    <td>{{ profile.city }}</td>
                </tr>
                <tr>
                    <td><strong>Email:</strong></td>
                    <td>{{ profile.email }}</td>
                </tr>
            </table>
        </div>
    </div>
    <a href="{% url 'create_status' profile.pk %}" class="form-button">Post a Status Message</a>

    <div class="status-messages">
        <h3><u>Status Messages</u></h3>

        {% if profile.get_status_messages %}
            {% for s in profile.get_status_messages %}
                <div class="status-message">
                    <p>{{ s.message }} <br>
                        <strong>{{ s.timestamp|date:"M d, Y H:i" }}:</strong> </p>
                
                    {% for image in s.get_images %}
                        <img src="{{image.image.url}}" alt="image.image.url" style="max-width: 200px; max-height: 200px;">
                    {% endfor %}
                    
                </div>  

                
            {% endfor %}
        {% else %}
            <div>
                <p>No status messages available.</p>
            </div>
        {% endif %}
    </div>
{% endblock %}

